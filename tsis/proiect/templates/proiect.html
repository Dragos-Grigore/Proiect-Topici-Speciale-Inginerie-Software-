<!DOCTYPE html>
<html lang="en">
<head>
<title>MultiModalApp</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-bar,h1,button {font-family: "Montserrat", sans-serif}
.fa-anchor,.fa-coffee {font-size:200px}
</style>
</head>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-red w3-card w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-red" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a href="/" class="w3-bar-item w3-button w3-padding-large w3-white">Home</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large w3-white">Playground</a>
  </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
    
  </div>
</div>




<header class="w3-container w3-red w3-center" style="padding:128px 16px">
    <h1 class="w3-margin w3-jumbo">Welcome to the Playground <i class="fa fa-gamepad" aria-hidden="true"></i></h1>
    
    <!-- File Upload Form -->
    <form id="upload-form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="file-upload" class="w3-button w3-black w3-padding-large w3-large w3-margin-top">
            Browse Image
        </label>
        <input id="file-upload" type="file" name="image" accept="image/*" style="display: none;" onchange="enableTryItButton()">
        

        <button id="try-it-button" type="submit" class="w3-button w3-black w3-padding-large w3-large w3-margin-top" disabled>Try it</button>    
        
    </form>

    <div class="w3-margin-top" style="display: inline-block; vertical-align: middle; margin-left: 10px;">
        <!-- Dropdown Menu (Placed next to the buttons) -->
        <label for="llm-select">Choose a LLM:</label>
        <select id="llm-select" class="w3-select w3-black w3-padding-large w3-large">
            <option value="LLM 1" selected>LLM 1</option>
            <option value="LLM 2">LLM 2</option>
        </select>
    </div>
    
    <!-- Message Box for Success -->
    <div id="message-box" class="w3-container w3-green w3-padding-16" style="display: none;">
        <p>Image uploaded successfully!</p>
    </div>
    
  </header>


<!-- First Grid -->
<div class="w3-row-padding w3-padding-64 w3-container">
  <div class="w3-content">
    <div class="w3-twothird">
      <h1>The Playground</h1>
      <h5 class="w3-padding-32">The Playground allows you to try different configurations of the model</h5>

      <p class="w3-text-grey">You can upload a picture and then obtain a description of it.</p>
    </div>

    <div class="w3-third w3-center">
        <i class="fa fa-camera w3-padding-64 w3-text-red" style="font-size: 150px;"></i>
    </div>
  </div>
</div>

<!-- Second Grid -->
<div class="w3-row-padding w3-light-grey w3-padding-64 w3-container">
  <div class="w3-content">
    <div class="w3-third w3-center">
        <i class="fa fa-globe w3-padding-64 w3-text-red" style="font-size: 150px;"></i>
    </div>

    <div class="w3-twothird">
      <h1>LLMs</h1>
      <h5 class="w3-padding-32">You can select a Large Language Model from the provided combo-box.</h5>

      <p class="w3-text-grey">The LLM that you choose is important because of the visual descriptions that can be obtained from a certain picture. Some can provide accurate descriptions and some not so much. Play around and see which LLM provides the most accurate results </p>
    </div>
  </div>
</div>


<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-center w3-opacity">  
  
 </div>
 <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
</footer>

<script>

function enableTryItButton() {
  document.getElementById('try-it-button').disabled = false;
}




document.getElementById('upload-form').addEventListener('submit', function(event) {
        event.preventDefault();  // Prevent normal form submission
        
        var formData = new FormData(this);  // Collect form data
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '{% url "upload_image" %}', true);  // Set the correct URL for your view

        // Handle the AJAX response
        xhr.onload = function() {
            if (xhr.status == 200) {
                // Parse the JSON response
                var response = JSON.parse(xhr.responseText);
                var imagePath = response.image_url;

                // Show an alert with the image path
                alert('Image uploaded successfully!\nImage Path: ' + imagePath);
            } else {
                // Show an error message (if something goes wrong)
                alert('Image upload failed.');
            }
        };

        // Send the form data via AJAX
        xhr.send(formData);
    });
</script>

</body>
</html>
